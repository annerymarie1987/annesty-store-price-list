<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Annesty Store - QR Price List & BNPL Log</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: #f8f9fa;
}
.card { border-radius: 12px; }
.table thead th { background: #3498db; color: white; }
h1.frame-title {
    text-align:center;
    border:2px solid #3498db;
    padding:15px;
    border-radius:10px;
    background-color:#f0f8ff;
    margin-bottom:20px;
}
</style>
</head>
<body>

<div class="container py-4">
    <h1 class="frame-title">QR Price List</h1>

    <!-- Tabs -->
    <ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="price-tab" data-bs-toggle="tab" data-bs-target="#price" type="button" role="tab">Price List</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="bnpl-tab" data-bs-toggle="tab" data-bs-target="#bnpl" type="button" role="tab">Buy Now Pay Later Log</button>
        </li>
    </ul>

    <div class="tab-content" id="mainTabsContent">
        <!-- Price List Tab -->
        <div class="tab-pane fade show active" id="price" role="tabpanel">
            <div class="card mb-3 p-3">
                <div class="row g-2 mb-3">
                    <div class="col-md-4">
                        <input type="text" id="searchInput" class="form-control" placeholder="Search description">
                    </div>
                    <div class="col-md-3">
                        <select id="categorySelect" class="form-select">
                            <option value="">All Categories</option>
                            <option value="DRINK">DRINK</option>
                            <option value="SNACKS">SNACKS</option>
                            <option value="NOODLES">NOODLES</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <input type="text" id="priceInput" class="form-control" placeholder="Price">
                    </div>
                    <div class="col-md-3 d-flex gap-2">
                        <button class="btn btn-primary flex-grow-1" id="searchBtn">Search</button>
                        <button class="btn btn-outline-secondary flex-grow-1" id="resetBtn">Reset</button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-sm" id="itemsTable">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Category</th>
                                <th>Price (PHP)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rows inserted by JS -->
                        </tbody>
                    </table>
                </div>
                <div class="text-end mt-2"><span id="visibleCount">0 items</span></div>
            </div>
        </div>

        <!-- BNPL Tab -->
        <div class="tab-pane fade" id="bnpl" role="tabpanel">
            <div class="card p-3 mb-3">
                <h5>Log an Item</h5>
                <form id="bnplForm" class="row g-3">
                    <div class="col-md-4">
                        <input type="text" id="userName" class="form-control" placeholder="Your Name" required>
                    </div>
                    <div class="col-md-4">
                        <select id="itemSelect" class="form-select" required>
                            <option value="">Select Item</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <input type="date" id="purchaseDate" class="form-control" required>
                    </div>
                    <div class="col-md-1">
                        <button type="submit" class="btn btn-success w-100">Add</button>
                    </div>
                </form>
            </div>

            <div class="card p-3">
                <h5>Logged Items</h5>
                <div class="table-responsive">
                    <table class="table table-sm" id="bnplTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Item</th>
                                <th>Price (PHP)</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Logged items -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const items = [
  ["Nescafe Original Twin","DRINK",20],
  ["Nescafe Creamy Latte Twin","DRINK",20],
  ["Kopiko Brown Twin","DRINK",20],
  ["Kopiko Blanca Twin","DRINK",20],
  ["Hiho Cruncy","SNACKS",3],
  ["Nissin Noodles Cheese","NOODLES",30],
  ["Nissin Noodles Creamy","NOODLES",30],
  ["Nissin Noodles Spicy","NOODLES",30],
  ["Nissin Noodles Seafood","NOODLES",30],
  ["Mr Chips","SNACKS",20],
  ["Tortillos Barbeque","SNACKS",20],
  ["CrisCross","SNACKS",20],
  ["Alibaba chips","SNACKS",20],
  ["Super Crunch","SNACKS",3],
  ["Tortillos Cheese","SNACKS",20],
  ["Pier20 Prawn","SNACKS",20],
  ["Nova","SNACKS",20],
  ["Peewee","SNACKS",20],
  ["Xsakto","SNACKS",3],
  ["BoyBawang Small","SNACKS",3],
  ["Tostas","SNACKS",20],
  ["Chippy","SNACKS",20],
  ["Clover","SNACKS",20],
  ["Tomi","SNACKS",20],
  ["Tostillas","SNACKS",30],
  ["Vcut","SNACKS",30],
  ["Piatos","SNACKS",30],
  ["Happy Peanuts Small","SNACKS",5],
  ["Pinatsu Seaweed","SNACKS",5],
  ["Pinatsu Garlic","SNACKS",5],
  ["Great Taste White","SNACKS",5],
  ["San Mig Coffee","SNACKS",15],
  ["Nissin Noodles Beef","NOODLES",20],
  ["Nissin Noodles Chicken","NOODLES",20],
  ["Matcha","DRINK",20],
  ["Milo","DRINK",15],
];

const tbody = document.querySelector("#itemsTable tbody");
const searchInput = document.getElementById("searchInput");
const categorySelect = document.getElementById("categorySelect");
const priceInput = document.getElementById("priceInput");
const searchBtn = document.getElementById("searchBtn");
const resetBtn = document.getElementById("resetBtn");
const visibleCount = document.getElementById("visibleCount");

// Populate Price List Table
function renderRows(list){
    tbody.innerHTML = "";
    if(list.length===0){
        tbody.innerHTML = '<tr><td colspan="3" class="text-center">No items found</td></tr>';
    } else {
        list.forEach(row=>{
            const tr = document.createElement("tr");
            tr.innerHTML = `<td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td>`;
            tbody.appendChild(tr);
        });
    }
    visibleCount.textContent = list.length + (list.length===1 ? " item" : " items");
}
renderRows(items);

// Search functionality
function filterItems(){
    const q = searchInput.value.toLowerCase();
    const category = categorySelect.value;
    const priceVal = priceInput.value;
    const priceFilter = priceVal === "" ? null : Number(priceVal);

    const filtered = items.filter(([desc, cat, price])=>{
        return (q===""||desc.toLowerCase().includes(q)) &&
               (category===""||cat===category) &&
               (priceFilter===null||price===priceFilter);
    });
    renderRows(filtered);
}

searchBtn.addEventListener("click", filterItems);
resetBtn.addEventListener("click", ()=>{
    searchInput.value=""; categorySelect.value=""; priceInput.value="";
    renderRows(items);
});

// Press enter to search
[searchInput, categorySelect, priceInput].forEach(el=>{
    el.addEventListener("keydown", e=>{
        if(e.key==="Enter"){ e.preventDefault(); filterItems(); }
    });
});

// BNPL Log Tab
const itemSelect = document.getElementById("itemSelect");
const bnplForm = document.getElementById("bnplForm");
const bnplTable = document.querySelector("#bnplTable tbody");

// Populate dropdown with items
items.forEach(([desc, cat, price])=>{
    const option = document.createElement("option");
    option.value = price;
    option.textContent = `${desc} (PHP ${price})`;
    option.dataset.name = desc;
    option.dataset.price = price;
    itemSelect.appendChild(option);
});

// Handle form submission
bnplForm.addEventListener("submit", e=>{
    e.preventDefault();
    const name = document.getElementById("userName").value;
    const selectedOption = itemSelect.selectedOptions[0];
    const itemName = selectedOption.dataset.name;
    const itemPrice = selectedOption.dataset.price;
    const date = document.getElementById("purchaseDate").value;

    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${name}</td><td>${itemName}</td><td>${itemPrice}</td><td>${date}</td>`;
    bnplTable.appendChild(tr);

    // Reset form
    bnplForm.reset();
});
</script>
</body>
</html>
